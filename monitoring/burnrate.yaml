# SPDX-License-Identifier: Apache-2.0
groups:
- name: error-burn
  rules:
  - alert: ErrorBudgetBurnFast
    expr: (sum(rate(http_requests_total{status=~"5.."}[5m])) / sum(rate(http_requests_total[5m]))) > 0.05
    for: 5m
    labels: { severity: critical }
    annotations: { summary: "5xx >5% over 5m" }
  - alert: ErrorBudgetBurnSlow
    expr: (sum(rate(http_requests_total{status=~"5.."}[30m])) / sum(rate(http_requests_total[30m]))) > 0.02
    for: 1h
    labels: { severity: warning }
    annotations: { summary: "5xx >2% over 30m" }
- name: latency-burn
  rules:
  - alert: LatencyP99Burn
    expr: histogram_quantile(0.99, sum(rate(http_request_duration_seconds_bucket[5m])) by (le)) > 0.35
    for: 10m
    labels: { severity: warning }
    annotations: { summary: "p99 >350ms over 10m" }
